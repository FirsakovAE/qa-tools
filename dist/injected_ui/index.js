import{c as g,a as l,_ as w,d as u}from"../assets/App.vue_vue_type_script_setup_true_lang-B72ylfZA.js";class p{async get(t){try{return(await chrome.storage.local.get(t))[t]??null}catch{return null}}async set(t,e){try{await chrome.storage.local.set({[t]:e})}catch{}}async remove(t){try{await chrome.storage.local.remove(t)}catch{}}}const h="__VUE_INSPECTOR__";class f{id="extension";capabilities={hasBackgroundScript:!0,hasPopup:!0,canInspectOtherTabs:!0,hasPersistentStorage:!0,mode:"extension"};storage=new p;messageListeners=new Set;windowListener=null;pendingRequests=new Map;requestCounter=0;isIframe;constructor(){this.isIframe=window!==window.parent}getResourceURL(t){return chrome.runtime.getURL(t)}getManifest(){return chrome.runtime.getManifest()}async sendMessage(t,e=5e3){return this.isIframe?this.sendViaPostMessage(t,e):this.sendViaChrome(t,e)}async sendViaPostMessage(t,e){return new Promise((s,n)=>{const r=`req_${++this.requestCounter}_${Date.now()}`,i=setTimeout(()=>{this.pendingRequests.delete(r),n(new Error("Message timeout"))},e);this.pendingRequests.set(r,{resolve:s,reject:n,timeout:i}),this.ensureWindowListener(),window.parent.postMessage({[h]:!0,requestId:r,message:t},"*")})}async sendViaChrome(t,e){return new Promise((s,n)=>{const r=setTimeout(()=>{n(new Error("Message timeout"))},e);chrome.tabs.query({active:!0,currentWindow:!0},i=>{if(!i[0]?.id){clearTimeout(r),n(new Error("No active tab"));return}chrome.tabs.sendMessage(i[0].id,t,c=>{clearTimeout(r),chrome.runtime.lastError?n(new Error(chrome.runtime.lastError.message)):s(c)})})})}onMessage(t){return this.messageListeners.add(t),this.isIframe?this.ensureWindowListener():this.ensureChromeListener(),()=>{this.messageListeners.delete(t),this.messageListeners.size===0&&this.pendingRequests.size===0&&(this.removeWindowListener(),this.removeChromeListener())}}ensureWindowListener(){this.windowListener||(this.windowListener=t=>{const e=t.data;if(!(!e||typeof e!="object")&&e[h]){if(e.responseId&&this.pendingRequests.has(e.responseId)){const s=this.pendingRequests.get(e.responseId);this.pendingRequests.delete(e.responseId),clearTimeout(s.timeout),e.error?s.reject(new Error(e.error)):s.resolve(e.response);return}if(e.broadcast&&e.message)for(const s of this.messageListeners)try{s(e.message,()=>{})}catch{}}},window.addEventListener("message",this.windowListener))}removeWindowListener(){this.windowListener&&(window.removeEventListener("message",this.windowListener),this.windowListener=null)}chromeListener=null;ensureChromeListener(){this.chromeListener||(this.chromeListener=(t,e,s)=>{let n=!1;for(const r of this.messageListeners)r(t,s)===!0&&(n=!0);return n},chrome.runtime.onMessage.addListener(this.chromeListener))}removeChromeListener(){this.chromeListener&&(chrome.runtime.onMessage.removeListener(this.chromeListener),this.chromeListener=null)}onReady(t){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",t):t()}destroy(){this.removeWindowListener(),this.removeChromeListener();for(const{timeout:t,reject:e}of this.pendingRequests.values())clearTimeout(t),e(new Error("Adapter destroyed"));this.pendingRequests.clear(),this.messageListeners.clear()}}function L(){return new f}const a="__vue_inspector_storage__",d="__VUE_INSPECTOR__";class _{async get(t){try{const e=localStorage.getItem(a);return(e?JSON.parse(e):{})[t]??null}catch{return null}}async set(t,e){try{const s=localStorage.getItem(a),n=s?JSON.parse(s):{};n[t]=e,localStorage.setItem(a,JSON.stringify(n))}catch{}}async remove(t){try{const e=localStorage.getItem(a),s=e?JSON.parse(e):{};delete s[t],localStorage.setItem(a,JSON.stringify(s))}catch{}}}class I{id="standalone";capabilities={hasBackgroundScript:!1,hasPopup:!1,canInspectOtherTabs:!1,hasPersistentStorage:!0,mode:"standalone"};storage=new _;config;messageListeners=new Set;windowListener=null;pendingRequests=new Map;requestCounter=0;constructor(t){this.config={targetOrigin:"*",...t}}getResourceURL(t){return`${this.config.baseURL.replace(/\/$/,"")}/${t}`}getManifest(){return{manifest_version:3,name:"Vue Inspector (Standalone)",version:"1.0.0",description:"Standalone version of Vue Inspector",action:{default_title:"Vue Inspector"}}}async sendMessage(t,e=5e3){return new Promise((s,n)=>{try{const r=`req_${++this.requestCounter}_${Date.now()}`,i=setTimeout(()=>{this.pendingRequests.delete(r),n(new Error("Message timeout"))},e);this.pendingRequests.set(r,{resolve:s,reject:n,timeout:i}),this.ensureWindowListener(),(this.config.targetWindow||window.parent).postMessage({[d]:!0,requestId:r,message:t},this.config.targetOrigin)}catch(r){n(r)}})}onMessage(t){return this.messageListeners.add(t),this.ensureWindowListener(),()=>{this.messageListeners.delete(t),this.messageListeners.size===0&&this.pendingRequests.size===0&&this.removeWindowListener()}}onReady(t){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",t):t()}destroy(){this.removeWindowListener();for(const{timeout:t,reject:e}of this.pendingRequests.values())clearTimeout(t),e(new Error("Adapter destroyed"));this.pendingRequests.clear(),this.messageListeners.clear()}ensureWindowListener(){this.windowListener||(this.windowListener=t=>{const e=t.data;if(!(!e||typeof e!="object")&&e[d]){if(e.responseId&&this.pendingRequests.has(e.responseId)){const s=this.pendingRequests.get(e.responseId);this.pendingRequests.delete(e.responseId),clearTimeout(s.timeout),e.error?s.reject(new Error(e.error)):s.resolve(e.response);return}if(e.broadcast){for(const s of this.messageListeners)try{s(e.message,()=>{})}catch{}return}if(e.requestId&&e.message){const s=n=>{const r=t.source;r&&r.postMessage({[d]:!0,responseId:e.requestId,response:n},this.config.targetOrigin)};for(const n of this.messageListeners)try{if(n(e.message,s)===!0)return}catch{}}}},window.addEventListener("message",this.windowListener))}removeWindowListener(){this.windowListener&&(window.removeEventListener("message",this.windowListener),this.windowListener=null)}}function R(o){return new I(o)}function E(){const t=window.location.hash.match(/standalone=([^&]+)/);let e=!1,s="";if(t)e=!0,s=decodeURIComponent(t[1]);else try{e=!!window.parent?.__VUE_INSPECTOR_STANDALONE__,s=window.parent?.__VUE_INSPECTOR_BASE_URL__||""}catch{}if(e){const n=R({baseURL:s,targetWindow:window.parent});u(n)}else{const n=L();u(n)}}E();const m=g(l);m.component("Toaster",w);m.mount("#app");console.log("Injected UI app mounted");
